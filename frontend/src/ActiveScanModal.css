/* overlay + blur only when modal open */
.asm-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(3,6,3,0.6);
  backdrop-filter: none; /* no blur by default */
  z-index: 1200;
  animation: asm-fade 220ms ease-in;
}

.asm-overlay.open {
  backdrop-filter: blur(4px) saturate(1.1); /* blur only when open */
}

/* card */
.asm-card {
  width: min(520px, calc(100% - 48px));
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(8,12,8,0.86), rgba(5,8,6,0.95));
  border: 1px solid rgba(36,255,107,0.06);
  box-shadow: 0 18px 60px rgba(0,0,0,0.7), 0 6px 28px rgba(36,255,107,0.03);
  color: var(--white);
  padding: 18px;
  transform-origin: center;
  transition: transform 220ms cubic-bezier(.2,.9,.2,1), opacity 180ms ease;
}

/* open/close */
.asm-card.asm-open { transform: translateY(0) scale(1); opacity: 1; }
.asm-card.asm-close { transform: translateY(8px) scale(.98); opacity: 0; }

/* header */
.asm-header { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:6px; }
.asm-title { font-size:18px; font-weight:800; letter-spacing:0.6px; color: var(--accent-green); display:flex; align-items:center; gap:8px; }
.asm-close-btn { background:none; border:none; color:var(--muted); font-size:16px; cursor:pointer; padding:6px 8px; border-radius:8px; }
.asm-close-btn:hover { color:#fff; background: rgba(255,255,255,0.02); }

/* body */
.asm-body { margin-top:8px; display:block; gap:12px; }
.asm-warning { background: rgba(255, 150, 50, 0.06); border: 1px solid rgba(255,150,50,0.06); padding:10px; border-radius:8px; color: #ffd9b3; margin-bottom:10px; font-size:13px; }

/* sections */
.asm-section { margin-top:10px; }
.asm-sub { color: var(--muted); font-weight:700; font-size:13px; margin-bottom:8px; display:block; }

.asm-modules { display:flex; gap:10px; flex-wrap:wrap; }
.asm-module {
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:10px; cursor:pointer;
  background: rgba(255,255,255,0.02); border: 1px solid transparent; transition: all 160ms ease;
}
.asm-module input { transform: scale(1.05); accent-color: var(--accent-green); }
.asm-module:hover { transform: translateY(-3px); box-shadow: 0 6px 18px rgba(36,255,107,0.03); }
.asm-module.active { background: rgba(36,255,107,0.06); border-color: rgba(36,255,107,0.12); }

/* note input */
.asm-note { margin-top:8px; width:100%; padding:10px; background: rgba(0,0,0,0.45); border-radius:8px; border:1px solid rgba(255,255,255,0.03); color:var(--white); }

/* consent box */
.asm-consent-box {
  margin-top:12px; display:flex; align-items:center; gap:8px;
  padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  transition: all 180ms ease;
}
.asm-consent-box.granted { border-color: rgba(36,255,107,0.18); box-shadow: 0 8px 30px rgba(36,255,107,0.06); transform: translateY(-2px); }
.asm-consent-box.flash { animation: consent-flash 900ms ease; }
@keyframes consent-flash {
  0% { box-shadow: 0 0 0 rgba(36,255,107,0); }
  30% { box-shadow: 0 0 30px rgba(255,90,60,0.12); transform: translateY(-2px); }
  100% { box-shadow: 0 8px 30px rgba(36,255,107,0.06); transform: none; }
}

/* footer */
.asm-footer { margin-top:14px; display:flex; justify-content:space-between; align-items:center; gap:12px; }
.asm-left-hint small { color: var(--muted); }
.asm-actions { display:flex; gap:8px; }

.btn { border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700; font-family: "Source Code Pro", monospace; letter-spacing:0.6px; }
.asm-start {
  background: linear-gradient(90deg, var(--accent-green), var(--accent-green-dk));
  color:#02110a;
  box-shadow: 0 8px 26px rgba(36,255,107,0.06);
  transition: transform 120ms ease, filter 120ms ease;
}
.asm-start[disabled] { opacity:0.45; cursor:not-allowed; transform:none; filter:grayscale(0.4); }
.asm-start:not([disabled]):hover { transform: translateY(-2px); filter:brightness(1.03); }
.asm-cancel { background:#111; color:var(--muted); border:1px solid rgba(255,255,255,0.02); }

@keyframes asm-fade { from { opacity:0 } to { opacity:1 } }

@media (max-width:520px) {
  .asm-card { width: calc(100% - 24px); padding:14px; }
  .asm-modules { gap:8px; }
}

/* Logs container */
.asm-logs {
  max-height: 250px; /* or whatever height you want */
  overflow-y: auto;
  padding: 8px;
  background: rgba(0,0,0,0.35);
  border-radius: 6px;
  font-family: "Source Code Pro", monospace;
  font-size: 13px;
  line-height: 1.4;
  color: #e5e5e5;
  white-space: pre-wrap;
  
  /* hide scrollbar for Webkit browsers */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}

.asm-logs::-webkit-scrollbar {
  width: 0px;
  background: transparent; /* Chrome/Safari */
}
